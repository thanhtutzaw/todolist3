import{j as l,a as e,r as d,F as y,A as v,b,d as E,K as N}from"./index-e2770391.js";function B(i){const{closeHandle:o,closeConfirm:a}=i;return l("div",{className:"closeConfirmModal",children:[e("p",{style:{fontWeight:"500",fontSize:"22px"},children:"Discard Changes ?"}),l("div",{children:[e("button",{className:"btn continueBtn",onClick:a,children:"Keep editing"}),e("button",{className:"btn discardBtn",onClick:()=>{a(),o()},children:"Discard"})]})]})}function S(i){return e("div",{className:"closeConfirmModal",children:l("p",{style:{fontWeight:"500",fontSize:"22px"},children:[e("span",{role:"img","aria-label":"updating",children:"ðŸŒŸ"})," ","Updating..."]})})}function U(i){const{text:o,settext:a,todo:t,editInput:f,closeHandle:c,clearSelect:m,setisPrevent:r}=i,[s,u]=d.useState(!1);console.log("editmodal rendering"),d.useEffect(()=>{s?document.getElementById("updating").showModal():document.getElementById("updating").close()},[s]);const p=async n=>{const C=v(E,"users",b.currentUser.uid,"todos",n),M={...t,text:o};if(o!==t.text){console.info("%cUpdating...","color:grey"),u(!0),r(!0);try{await N(C,M),document.getElementById("editModal").close(),console.info("%cUpdated âœ”ï¸","color:green"),u(!1),m(),r(!1)}catch(x){alert("Update Error ! "+x.message)}}else c()},g=d.useRef(null);d.useEffect(()=>{t&&a(t.text)},[t]);function h(){document.querySelector("#confirmModal").close()}return l(y,{children:[e("dialog",{id:"confirmModal",children:e(B,{closeConfirm:h,closeHandle:c})}),e("dialog",{id:"updating",children:e(S,{})}),t&&e("div",{style:{pointerEvents:s?"none":"auto",userSelect:s?"none":"unset"},className:"editModal",onClick:n=>{n.preventDefault(),n.stopPropagation()},children:l("div",{className:"editInput",ref:f,children:[e("textarea",{style:{userSelect:s?"none":"unset"},value:o,ref:g,onChange:n=>{a(n.target.value)},className:"textarea"}),l("div",{className:"editModalActions",children:[e("button",{onClick:()=>{o!==t.text?document.getElementById("confirmModal").showModal():c()},className:"editCloseBtn",children:"Close"}),e("button",{onClick:()=>{p(t.id)},type:"submit",className:"updateBtn",children:"Save"})]})]})},t.id)]})}export{U as default};
